# handlers/tip.py
def register_handlers(bot):
    @bot.message_handler(commands=['add_tip'])
    def add_tip_command(message):
        msg = bot.send_message(message.chat.id, "Напиши наводку (формат в сообщении выше) или прикрепи фото.")
        bot.register_next_step_handler(msg, process_tip, message.from_user.id)

    @bot.callback_query_handler(func=lambda c: c.data == 'add_tip')
    def add_tip_start(call):
        msg = bot.send_message(call.message.chat.id, "Напиши наводку (формат в сообщении выше) или прикрепи фото.")
        bot.register_next_step_handler(msg, process_tip, call.from_user.id)

    def process_tip(message, user_id):
        # Твой код process_tip из старого файла
        tip_text = message.text.strip() if message.text else ""
        photo_id = message.photo[-1].file_id if message.photo else None
        
        bot.send_message(message.chat.id, "Наводка отправлена админам!", reply_markup=main_menu())

        kb = types.InlineKeyboardMarkup()
        kb.add(
            types.InlineKeyboardButton("Подтвердить", callback_data=f"approve_tip_{message.message_id}"),
            types.InlineKeyboardButton("Отклонить", callback_data=f"reject_tip_{message.message_id}")
        )
        
        info = f"Наводка от @{message.from_user.username} ({message.from_user.id})\n\n{tip_text}"
        
        for admin in ADMIN_IDS:
            if photo_id:
                bot.send_photo(admin, photo_id, caption=info, reply_markup=kb)
            else:
                bot.send_message(admin, info, reply_markup=kb)

    def parse_tip(tip_text):
        # Твой код parse_tip

    @bot.callback_query_handler(func=lambda c: c.data.startswith('approve_tip_') or c.data.startswith('reject_tip_'))
    def handle_tip_approval(call):
        # Твой код handle_tip_approval